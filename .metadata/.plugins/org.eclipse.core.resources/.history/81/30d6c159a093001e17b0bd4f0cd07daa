package bus;

import java.util.Date;
import java.time.LocalDate;

public class CheckingAccount extends Account {

	private int monthlyTransactionLimit;
	private double transactionFees;
	
	public CheckingAccount() {
		super();
		this.monthlyTransactionLimit = 3;
		this.transactionFees = 0.00;
	}
	
	public CheckingAccount(Integer accountNumber, EnumTypeAccount type, Integer customerNumber, Double balance, Date openingDate,
			TransactionCollection transactions, int monthlyTransactionLimit, double transactionFees) {
		super(accountNumber, type, customerNumber, balance, openingDate, transactions);
		setMonthlyTransactionLimit(monthlyTransactionLimit);
		this.transactionFees = transactionFees;
	}

	public int getMonthlyTransactionLimit() {
		return monthlyTransactionLimit;
	}

	public void setMonthlyTransactionLimit(int monthlyTransactionLimit) {
		if (monthlyTransactionLimit < 3) {
			this.monthlyTransactionLimit = 3;
		} else {
			this.monthlyTransactionLimit = monthlyTransactionLimit;
		}
	}

	public double getTransactionFees() {
		return transactionFees;
	}

	public void setTransactionFees(double transactionFees) {
		this.transactionFees = transactionFees;
	}

	@Override
	public void deposit(LocalDate transactionDate, Double amount) {
		if (amount > 0) {
			
			if (transactions.getCountThisMonth(transactionDate) < this.monthlyTransactionLimit) {
				this.balance += amount;

	            Transaction transaction = new Transaction(null, "Deposit", transactionDate,
	            		amount, EnumTypeTransaction.Credit);
	            
	            this.transactions.add(transaction);
			} 
			else {
				this.balance += amount;
				
				ransaction transaction = new Transaction(null, "Deposit", transactionDate,
	            		amount, EnumTypeTransaction.Credit);
	            
	            this.transactions.add(transactionDep);
	            
	            
	            
				this.balance -= this.transactionFees;

	            Transaction transactionFee = new Transaction(transactionNumber, description, transactionDate,
	            		amount, type);
	            
	            this.transactions.add(transactionFee);
			}
            
        }
		
	}

	@Override
	public void withdraw(Integer transactionNumber, String description, LocalDate transactionDate, Double amount,
			EnumTypeTransaction type) {

		if (amount > 0 && amount <= this.balance && transactions.getCountThisMonth(transactionDate) < monthlyTransactionLimit) {
            this.balance -= amount;

            this.balance -= transactionFees;

            Transaction transaction = new Transaction(transactionNumber, description, transactionDate, amount,
            		type);
            this.transactions.add(transaction);
        } else {
        	// valor incorreto ou excedeu limite de transações
        }
		
	}

	@Override
	public String toString() {
		return super.toString() + "\n\tMonthly Transaction Limit: " + monthlyTransactionLimit + 
								  "\n\tTransaction Fees: " + transactionFees;
	}

	

}
